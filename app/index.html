<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="myApp" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Competitions | Techkriti IIT Kanpur</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style type="text/css">body{margin:0;overflow-y:scroll}.loader-container{position:fixed;top:0;bottom:0;left:0;right:0;z-index:99999;background-color:#ececec;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;-webkit-box-pack:center;-moz-box-pack:center;box-pack:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-ms-flex-pack:center;-webkit-transition:all ease 300ms;-moz-transition:all ease 300ms;transition:all ease 300ms}.progress-bar{position:relative;width:100px;height:100px;-webkit-animation-name:circularProgress;-moz-animation-name:circularProgress;animation-name:circularProgress;-webkit-animation-duration:1000ms;-moz-animation-duration:1000ms;animation-duration:1000ms;-webkit-animation-delay:0s;-moz-animation-delay:0s;animation-delay:0s;-webkit-animation-play-state:running;-moz-animation-play-state:running;animation-play-state:running;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-iteration-count:infinite}@keyframes circularProgress{0%{-webkit-transform:rotateZ(0deg);-moz-transform:rotateZ(0deg);-ms-transform:rotateZ(0deg);-o-transform:rotateZ(0deg);transform:rotateZ(0deg)}100%{-webkit-transform:rotateZ(360deg);-moz-transform:rotateZ(360deg);-ms-transform:rotateZ(360deg);-o-transform:rotateZ(360deg);transform:rotateZ(360deg)}}.progress-viewer{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;box-align:center;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center;-ms-flex-align:center;-webkit-box-pack:center;-moz-box-pack:center;box-pack:center;-webkit-justify-content:center;-moz-justify-content:center;-ms-justify-content:center;-o-justify-content:center;justify-content:center;-ms-flex-pack:center;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;box-orient:horizontal;-webkit-box-direction:normal;-moz-box-direction:normal;box-direction:normal;-webkit-flex-direction:row;-moz-flex-direction:row;flex-direction:row;-ms-flex-direction:row;-webkit-box-lines:single;-moz-box-lines:single;box-lines:single;-webkit-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;font-family:sans-serif}</style>
</head>
<body>
  <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->
  <div id="loaderContainer" class="loader-container">
    <div>
      <div class="progress-viewer">
        <span id="progress">0</span>
        <span>%</span>
      </div>
      <div id="progressBar" class="progress-bar">
        <svg style="width: 100px;height: 100px;">
          <path id="svgPath" d="M25,1A24,24 0 1 1 1,25A24,24 0 0 1 25,1" stroke="#0070c9" fill="transparent" stroke-width="2" fill-opacity="0.5" stroke-dashoffset="400"></path>
          <script type="text/javascript">
            function getDashLength(diameter, strokeWidth, value, limit) {
              return (diameter - strokeWidth) * window.Math.PI * ( (3 * (limit || 100) / 100) - (value/100) );
            }
            function getDashArrayLength(diameter, strokeWidth){
              return (diameter - strokeWidth) * window.Math.PI;
            }
            function getSvgArc(diameter, strokeWidth, indeterminate) {
              var radius = diameter / 2;
              var offset = strokeWidth / 2;
              var start = radius + ',' + offset;
              var end = offset + ',' + radius;
              var arcRadius = radius - offset;
              return 'M' + start
                   + 'A' + arcRadius + ',' + arcRadius + ' 0 1 1 ' + end
                   + (indeterminate ? '' : 'A' + arcRadius + ',' + arcRadius + ' 0 0 1 ' + start);
            }
            var svgPath = document.getElementById('svgPath');
            var progress = document.getElementById('progress');
            var progressBar = document.getElementById('progressBar');
            var diameter = 100;
            var strokeWidth = 2;
            var percentLoaded = 1;
            function renderCircle(){
              var path = svgPath;
              path.setAttribute('stroke-dashoffset', getDashLength(diameter, strokeWidth, percentLoaded, 100));
              path.setAttribute('stroke-dasharray', getDashArrayLength(diameter, strokeWidth));
              path.setAttribute('d',getSvgArc(diameter, strokeWidth, false));
              if(percentLoaded < 81){
                percentLoaded =  percentLoaded + 1 ;
                // console.log(percentLoaded)
              }else{
                if(percentLoaded == 81 && !all_files_loaded){
                  clearInterval(animationIntervalId);
                  percentLoaded += 1;
                  // console.log(percentLoaded)
                }else{
                  if(percentLoaded < 100){
                    percentLoaded += 1;
                    // console.log(percentLoaded)
                  }else{
                    // console.log(percentLoaded)
                    clearInterval(animationIntervalId);
                    onFileLoad();
                  }
                }
              }
              progress.innerHTML = percentLoaded;
            }
            renderCircle();
            var animationIntervalId = setInterval(renderCircle, 35);
            loadjscssfile=function(t,e,i){if("js"==e){var s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("src",t)}else if("css"==e){var s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href",t)}i&&s.addEventListener("load",function(t){i(null,t)}),"undefined"!=typeof s&&document.getElementsByTagName("head")[0].appendChild(s)};

            var to_load = [
              {name:'./index.js',type:'js'},
              {name:'https://fonts.googleapis.com/css?family=Montserrat:400,700',type:'css'},
              {name:'./app.css',type:'css'},
            ];
            var animationDone = false;
            var all_files_loaded = false;
            function onFileLoad(file){
              if(typeof file!='undefined'){
                file.loaded = true;
                for(var i=0; i < to_load.length; i++){
                  if(to_load[i].loaded!=true){
                    console.log(file.name,' not loaded');
                    return;
                  }
                }
                all_files_loaded = true;
                console.log('all files loaded');
              }
              if(!animationDone && all_files_loaded){
                console.log('all files are loaded but animation is not done');
                return;
              }
              if(animationDone && !all_files_loaded){
                console.log('all files are not loaded but animation is done');
                return; 
              }

              if( percentLoaded < 100){
                percentLoaded += 2;
                clearInterval(animationIntervalId);
                animationIntervalId = setInterval(renderCircle, 20);
                console.log('calling renderCircle', animationIntervalId);
                return;
              }
              console.log('Ready to rock!!');
              clearInterval(animationIntervalId);
              var loaderContainer = document.getElementById('loaderContainer');
              loaderContainer.setAttribute('style','opacity:0');

              setTimeout(function(){
                loaderContainer.setAttribute('style','display:none');
                progressBar.setAttribute('style','animation:none');
                progressBar.setAttribute('class','');
              },400);
            }
            (function(){
              for(var i=0;i < to_load.length; i++){
                var file = to_load[i];
                loadjscssfile(file.name,file.type,onFileLoad.bind(window, file));
              }
            })();
            setTimeout(function(){
              animationDone = true;
              onFileLoad();
            },1000);
          </script>
        </svg>
      </div>
    </div>
  </div>
  <div ng-view></div>
  <!-- <script type="text/javascript" src="./index.min.js"></script> -->
</body>
</html>
